(function(d,i,w,C,e,b,E,A,f){"use strict";const{Animated:p}=e.ReactNative;function D(a){let{duration:r,children:n,style:o,fade:t,trigger:R,customOpacity:s,setDisplay:g,animateOnInit:l}=a;l??=!0;const I=e.React.useRef(!0),N=e.React.useRef(!0),u=e.React.useRef(new p.Value(l&&t==="in"?1:0)).current;return e.React.useEffect(function(){if(!l&&I.current){I.current=!1;return}!l&&N.current&&(u.setValue(t==="in"?0:1),N.current=!1),p.timing(u,{toValue:s??(t==="in"?1:0),duration:r,useNativeDriver:!0}).start()},[u,t,s,R]),e.React.createElement(p.View,{style:[{opacity:u},g&&u._value===0&&{display:"none"},o]},n)}const{ScrollView:S,Pressable:T,View:m}=A.General,c=40,h=e.stylesheet.createThemedStyleSheet({androidRipple:{color:f.semanticColors.ANDROID_RIPPLE,cornerRadius:2147483647},actionButton:{borderRadius:2147483647,height:c,width:c,marginHorizontal:4,flexShrink:0,flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:f.semanticColors.BACKGROUND_SECONDARY_ALT,marginLeft:8,marginTop:-4},actionIcon:{tintColor:f.semanticColors.INTERACTIVE_NORMAL,width:c*.6,height:c*.6}}),{default:V}=i.findByProps("DCDAutoModerationSystemMessageView"),_=i.findByName("MessageRecord"),x=i.findByName("RowManager"),B=i.findByStoreName("SelectedChannelStore"),P=i.findByStoreName("UserStore");function O(a){let{inputProps:r}=a;const n=e.React.useRef(null);r.onChangeText?w.after("onChangeText",r,function(s){let[g]=s;return n.current=g},!0):r.onChangeText=function(s){return n.current=s};const o=function(){b.showConfirmationAlert({title:"Message Preview",onConfirm:function(){},children:e.React.createElement(S,{style:{marginVertical:12,maxHeight:e.ReactNative.Dimensions.get("window").height*.7}},e.React.createElement(V,{rowGenerator:new x,message:new _({id:"0",channel_id:B.getChannelId(),author:P.getCurrentUser(),content:n.current})}))})},t=n.current?.length>0,R=t?T:m;return e.React.createElement(D,{style:{flexDirection:"row",position:"absolute",left:0,top:-c,zIndex:3},duration:100,fade:t?"in":"out"},e.React.createElement(R,{android_ripple:h.androidRipple,disabled:!1,accessibilityRole:"button",accessibilityState:{disabled:!1,expanded:!1},accessibilityLabel:"Open markdown preview",accessibilityHint:"Open a modal which shows your message's markdown preview",onPress:t?o:void 0,style:h.actionButton},e.React.createElement(e.ReactNative.Image,{style:h.actionIcon,source:E.getAssetIDByName("ic_eye")})))}const{ChatInput:M}=i.findByProps("ChatInput");let y=[];function L(){return y.push(w.after("render",M.prototype,function(a,r){const n=C.findInReactTree(r,function(t){return typeof t?.placeholder=="string"});if(!n?.onChangeText)return;const o=C.findInReactTree(r,function(t){return t?.type?.displayName==="View"&&Array.isArray(t?.props?.children)})?.props?.children;o&&o.unshift(React.createElement(O,{inputProps:n}))})),function(){y.forEach(function(a){return a()}),y=[]}}let v;var k={onLoad:function(){return v=L()},onUnload:function(){return v?.()}};return d.default=k,Object.defineProperty(d,"__esModule",{value:!0}),d})({},vendetta.metro,vendetta.patcher,vendetta.utils,vendetta.metro.common,vendetta.ui.alerts,vendetta.ui.assets,vendetta.ui.components,vendetta.ui);
