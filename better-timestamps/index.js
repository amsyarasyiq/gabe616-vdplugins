(function(h,T,e,w,m,b,L,_,u,B){"use strict";const{TextStyleSheet:x}=T.findByProps("TextStyleSheet"),{View:S,Text:D,Pressable:F}=b.General,{FormRow:I}=b.Forms;function H(n){const r=T.findByProps("colors","meta"),i=T.findByStoreName("ThemeStore");return r.meta.resolveSemanticColor(i.theme,n)}function M(n){let{title:r,onTitlePress:i,icon:o,children:t,padding:a}=n;const l=e.stylesheet.createThemedStyleSheet({androidRipple:{color:u.semanticColors.ANDROID_RIPPLE},mainText:{fontFamily:e.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:14,includeFontPadding:!1,letterSpacing:void 0,lineHeight:18,textTransform:"none",color:u.semanticColors.HEADER_SECONDARY},icon:{height:14,tintColor:u.semanticColors.HEADER_SECONDARY},main:{backgroundColor:u.semanticColors.BACKGROUND_TERTIARY,borderRadius:16,overflow:"hidden",flex:1}}),g=i?F:S;return e.React.createElement(S,{style:{marginHorizontal:16,marginTop:16}},e.React.createElement(g,{android_ripple:l.androidRipple,disabled:!1,accessibilityRole:"button",onPress:i,style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},o&&e.React.createElement(S,{style:{marginRight:4}},e.React.createElement(I.Icon,{style:l.icon,source:o,size:"small"})),e.React.createElement(D,{style:l.mainText},r)),e.React.createElement(S,{style:l.main},a?e.React.createElement(S,{style:{paddingHorizontal:16,paddingVertical:16}},t):t))}var v;(function(n){function r(o){let{children:t,onPress:a}=o;return e.React.createElement(O,{variant:"text-md/bold",onPress:a},t)}n.Bold=r;function i(o){let{children:t,onPress:a}=o;return e.React.createElement(D,{style:{textDecorationLine:"underline"},onPress:a},t)}n.Underline=i})(v||(v={}));function O(n){let{variant:r,lineClamp:i,color:o,align:t,style:a,onPress:l,getChildren:g,children:E,liveUpdate:c}=n;const[f,R]=e.React.useReducer(function(y){return~y},0),d=new Date().setMilliseconds(1e3);return c&&setTimeout(function(){return R()},d-Date.now()),e.React.createElement(D,{style:[r?x[r]:{},o?{color:H(u.semanticColors[o])}:{},t?{textAlign:t}:{},a??{}],numberOfLines:i,onPress:l},g?.()??E)}const{ScrollView:k,Text:p}=b.General,{FormSwitchRow:A,FormIcon:N}=b.Forms,{parseTimestamp:$}=T.findByProps("parseTimestamp","unparseTimestamp");function q(n){let{style:r}=n;const[i,o]=e.React.useReducer(function(c){return~c},0),t=new Date().setMilliseconds(1e3);setTimeout(function(){return o()},t-Date.now());const a=new Date,l=[[4],[19,20],[4,18,2],a.getHours()<12&&[a.getHours()],[a.getHours(),a.getMinutes()],[a.getHours(),a.getMinutes(),a.getSeconds()]].filter(function(c){return!!c}),g=[];let E=-1;for(const[c,f,R]of l){E++;const d=new Date;d.setHours(c,f??0,R||0);let y=[d.getHours().toString(),f!==void 0&&d.getMinutes().toString().padStart(2,"0"),R!==void 0&&d.getSeconds().toString().padStart(2,"0")].filter(function(z){return!!z}).join(":");c<12&&(y+=" AM");const C=$(Math.floor(d.getTime()/1e3).toString(),s.alwaysLong?"T":"t");g.push(s.reqBackticks?e.React.createElement(p,{style:r.code},y):y),g.push(" \u2014 "),g.push(e.React.createElement(p,{style:r.timestamp,onPress:function(){return B.showToast(C.full,m.getAssetIDByName("ic_information_24px"))}},C.formatted)),E!==l.length-1&&g.push(`
`)}return e.React.createElement(e.React.Fragment,null,...g)}function Y(){s.reqBackticks??=!0,s.alwaysLong??=!1,w.useProxy(s);const n=e.stylesheet.createThemedStyleSheet({mainText:{fontFamily:e.constants.Fonts.DISPLAY_NORMAL,includeFontPadding:!1,fontSize:16,color:u.semanticColors.TEXT_NORMAL},boldText:{fontFamily:e.constants.Fonts.DISPLAY_BOLD,includeFontPadding:!1,color:u.semanticColors.TEXT_NORMAL},code:{fontFamily:e.constants.Fonts.CODE_SEMIBOLD,includeFontPadding:!1,color:u.semanticColors.TEXT_NORMAL,backgroundColor:u.semanticColors.BACKGROUND_SECONDARY},timestamp:{fontFamily:e.constants.Fonts.DISPLAY_NORMAL,includeFontPadding:!1,color:u.semanticColors.TEXT_NORMAL,backgroundColor:u.semanticColors.BACKGROUND_MODIFIER_ACCENT}});return e.React.createElement(k,null,e.React.createElement(M,{title:"Info",icon:m.getAssetIDByName("ic_info_24px"),padding:!0},e.React.createElement(p,{style:n.mainText},"Send a message with a time code (in",e.React.createElement(p,{style:n.boldText}," HH:MM")," or",e.React.createElement(p,{style:n.boldText}," HH:MM:SS")," format) and automatically turn it into a timestamp",`

`,e.React.createElement(q,{style:n}))),e.React.createElement(M,{title:"Settings",icon:m.getAssetIDByName("settings")},e.React.createElement(A,{label:"Require Backticks",subLabel:"Require time to be surrounded by backticks",leading:e.React.createElement(N,{source:m.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return s.reqBackticks=!s.reqBackticks},value:s.reqBackticks}),e.React.createElement(A,{label:"Always Long Time",subLabel:["Always display ",e.React.createElement(p,{style:n.boldText},"HH:MM:SS")," instead of ",e.React.createElement(p,{style:n.boldText},"HH:MM")],leading:e.React.createElement(N,{source:m.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return s.alwaysLong=!s.alwaysLong},value:s.alwaysLong})))}const G=T.findByProps("sendMessage","receiveMessage"),s=_.storage;let P;var U={onLoad:function(){P=L.before("sendMessage",G,function(n){const r=n[1];let i=r?.content;if(typeof i!="string"||typeof r!="object")return;const o=s.reqBackticks?"`":"\\s",t={otN:"[0-9]{1,2}",tN:"[0-9]{2}",abrv:"(?: ?(AM|PM))"},a=[`(${t.otN}:${t.tN}:${t.tN})${t.abrv}?`,`(${t.otN}:${t.tN})${t.abrv}?`,`(${t.otN})${t.abrv}`].map(function(l){return new RegExp(`${o}${l}${o}`,"gi")});for(const l of a)i=i.replace(l,function(g,E,c){let[f,R,d]=E.split(":").map(function(C){return parseInt(C)});if(f<0||f>24||typeof R=="number"&&(R<0||R>60)||typeof d=="number"&&(d<0||d>60))return g;c&&(c.toLowerCase()==="pm"&&f!==12?f+=12:c.toLowerCase()==="am"&&f===12&&(f=0));const y=new Date;return y.setHours(f,R??0,d??0,0),`<t:${Math.floor(y.getTime()/1e3)}:${s.alwaysLong?"T":"t"}>`});r.content=i})},onUnload:function(){return P?.()},settings:Y};return h.default=U,h.vstorage=s,Object.defineProperty(h,"__esModule",{value:!0}),h})({},vendetta.metro,vendetta.metro.common,vendetta.storage,vendetta.ui.assets,vendetta.ui.components,vendetta.patcher,vendetta.plugin,vendetta.ui,vendetta.ui.toasts);
