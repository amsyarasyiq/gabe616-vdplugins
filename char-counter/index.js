(function(p,C,c,R,y,t,l,A,I,u,m){"use strict";const{canUseIncreasedMessageLength:b}=c.findByProps("canUseIncreasedMessageLength");function x(i){return s.commas?i.toString().split("").reverse().map(function(r,e,n){return e%3===0&&n.length>3&&e!==0?`${r},`:r}).reverse().join(""):i.toString()}function w(){return Object.keys(A.plugins).find(function(i){return i.includes("SplitLargeMessages")})?1/0:b()?4e3:2e3}const{Animated:h}=t.ReactNative;function B(i){let{duration:r,children:e,style:n,fade:a}=i;const o=t.React.useRef(new h.Value(a==="in"?0:1)).current;return t.React.useEffect(function(){h.timing(o,{toValue:a==="in"?1:0,duration:r,useNativeDriver:!0}).start()},[o,a]),t.React.createElement(h.View,{style:[n,{opacity:o}]},e)}const{Text:P}=l.General,{TextStyleSheet:_}=c.findByProps("TextStyleSheet"),d=t.stylesheet.createThemedStyleSheet({text:{..._["text-xs/semibold"],backgroundColor:u.semanticColors.BACKGROUND_TERTIARY,borderRadius:8,textAlign:"right",marginRight:8,marginTop:-12,paddingHorizontal:8,paddingVertical:8},normal:{color:u.semanticColors.TEXT_NORMAL},jinkies:{color:u.semanticColors.TEXT_DANGER}});function D(i){let{inputProps:r}=i;const e=t.React.useRef(null);r.onChangeText?R.after("onChangeText",r,function(T){let[H]=T;return e.current=H},!0):r.onChangeText=function(T){return e.current=T};const n=e.current?.length??0,a=w(),o=d.text.fontSize*2+d.text.paddingVertical;return t.React.createElement(B,{duration:100,style:{flexDirection:"row-reverse",position:"absolute",right:0,top:-o,zIndex:1},fade:n===0?"out":"in"},t.React.createElement(P,{style:{...d.text,color:n<=a?d.normal.color:d.jinkies.color}},x(n),"/",a!==1/0?x(a):"\u221E"))}const{ChatInput:V}=c.findByProps("ChatInput"),{MessagesWrapper:N}=c.findByProps("MessagesWrapper");let f=[];function F(){return f.push(R.after("render",V.prototype,function(i,r){const e=y.findInReactTree(r,function(a){return typeof a?.placeholder=="string"});if(!e?.onChangeText)return;const n=y.findInReactTree(r,function(a){return a?.type?.displayName==="View"&&Array.isArray(a?.props?.children)})?.props?.children;n&&n.unshift(React.createElement(D,{inputProps:e}))})),f.push(R.after("render",N.prototype,function(i,r){const e=y.findInReactTree(r,function(n){return n?.type?.name==="JumpToPresentButton"});e&&f.push(R.after("type",e,function(n,a){a?.props?.style&&(a.props.style[1].bottom+=32+8)}))})),function(){f.forEach(function(i){return i()}),f=[]}}const{TextStyleSheet:M}=c.findByProps("TextStyleSheet"),{View:g,Text:E}=l.General,{FormRow:z}=l.Forms;function G(i){let{title:r,icon:e,children:n,padding:a}=i;const o=t.stylesheet.createThemedStyleSheet({mainText:{fontFamily:t.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:14,includeFontPadding:!1,letterSpacing:void 0,lineHeight:18,textTransform:"none",color:u.semanticColors.HEADER_SECONDARY},main:{backgroundColor:u.semanticColors.BACKGROUND_TERTIARY,borderRadius:16,overflow:"hidden",flex:1}});return t.React.createElement(g,{style:{marginHorizontal:16,marginTop:16}},t.React.createElement(g,{style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},e&&t.React.createElement(g,{style:{marginRight:4}},t.React.createElement(z.Icon,{source:e,size:"small"})),t.React.createElement(E,{style:o.mainText},r)),t.React.createElement(g,{style:o.main},a?t.React.createElement(g,{style:{paddingHorizontal:16,paddingVertical:16}},n):n))}var v;(function(i){function r(e){let{children:n}=e;return t.React.createElement(E,{style:M["text-md/bold"]},n)}i.Bold=r})(v||(v={}));const{ScrollView:L}=l.General,{FormSwitchRow:O,FormRow:j}=l.Forms;function $(){return s.commas??=!0,I.useProxy(s),React.createElement(L,null,React.createElement(G,{title:"Settings",icon:m.getAssetIDByName("ic_cog_24px")},React.createElement(O,{label:"Add Thousand Seperators",subLabel:"Adds thousand seperators (1,234,567) to numbers",leading:React.createElement(j.Icon,{source:m.getAssetIDByName("ic_message_edit")}),onValueChange:function(){s.commas=!s.commas},value:s.commas})))}const s=C.storage;let S;var k={onLoad:function(){return S=F()},onUnload:function(){return S?.()},settings:$};return p.default=k,p.vstorage=s,Object.defineProperty(p,"__esModule",{value:!0}),p})({},vendetta.plugin,vendetta.metro,vendetta.patcher,vendetta.utils,vendetta.metro.common,vendetta.ui.components,vendetta.plugins,vendetta.storage,vendetta.ui,vendetta.ui.assets);
