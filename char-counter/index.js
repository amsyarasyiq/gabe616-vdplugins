(function(x,V,R,C,b,e,y,z,G,c,v){"use strict";const F=R.findByStoreName("UserStore");function D(a){return l.commas?a.toString().split("").reverse().map(function(n,r,i){return r%3===0&&i.length>3&&r!==0?`${n},`:n}).reverse().join(""):a.toString()}function H(){return!!(l.supportSLM&&Object.values(z.plugins).find(function(a){return a.manifest.name==="SplitLargeMessages"})?.enabled)}function U(){return F.getCurrentUser().premiumType===2?4e3:2e3}const{Animated:P}=e.ReactNative;function N(a){let{duration:n,children:r,style:i,fade:t,trigger:o,customOpacity:s,setDisplay:u,animateOnInit:d}=a;d??=!0;const g=e.React.useRef(!0),p=e.React.useRef(!0),f=e.React.useRef(new P.Value(d&&t==="in"?1:0)).current;return e.React.useEffect(function(){if(!d&&g.current){g.current=!1;return}!d&&p.current&&(f.setValue(t==="in"?0:1),p.current=!1),P.timing(f,{toValue:s??(t==="in"?1:0),duration:n,useNativeDriver:!0}).start()},[f,t,s,o]),e.React.createElement(P.View,{style:[{opacity:f},u&&f._value===0&&{display:"none"},i]},r)}const{TextStyleSheet:Y}=R.findByProps("TextStyleSheet"),{View:h,Text:A,Pressable:$}=y.General,{FormRow:j}=y.Forms;function X(a){const n=R.findByProps("colors","meta"),r=R.findByStoreName("ThemeStore");return n.meta.resolveSemanticColor(r.theme,a)}function k(a){let{title:n,onTitlePress:r,icon:i,children:t,padding:o}=a;const s=e.stylesheet.createThemedStyleSheet({androidRipple:{color:c.semanticColors.ANDROID_RIPPLE},mainText:{fontFamily:e.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:14,includeFontPadding:!1,letterSpacing:void 0,lineHeight:18,textTransform:"none",color:c.semanticColors.HEADER_SECONDARY},icon:{height:14,tintColor:c.semanticColors.HEADER_SECONDARY},main:{backgroundColor:c.semanticColors.BACKGROUND_TERTIARY,borderRadius:16,overflow:"hidden",flex:1}}),u=r?$:h;return e.React.createElement(h,{style:{marginHorizontal:16,marginTop:16}},e.React.createElement(u,{android_ripple:s.androidRipple,disabled:!1,accessibilityRole:"button",onPress:r,style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},i&&e.React.createElement(h,{style:{marginRight:4}},e.React.createElement(j.Icon,{style:s.icon,source:i,size:"small"})),e.React.createElement(A,{style:s.mainText},n)),e.React.createElement(h,{style:s.main},o?e.React.createElement(h,{style:{paddingHorizontal:16,paddingVertical:16}},t):t))}var M;(function(a){function n(i){let{children:t,onPress:o}=i;return e.React.createElement(I,{variant:"text-md/bold",onPress:o},t)}a.Bold=n;function r(i){let{children:t,onPress:o}=i;return e.React.createElement(A,{style:{textDecorationLine:"underline"},onPress:o},t)}a.Underline=r})(M||(M={}));function I(a){let{variant:n,lineClamp:r,color:i,align:t,style:o,onPress:s,getChildren:u,children:d,liveUpdate:g}=a;const[p,f]=e.React.useReducer(function(_){return~_},0),S=new Date().setMilliseconds(1e3);return g&&setTimeout(function(){return f()},S-Date.now()),e.React.createElement(A,{style:[n?Y[n]:{},i?{color:X(c.semanticColors[i])}:{},t?{textAlign:t}:{},o??{}],numberOfLines:r,onPress:s},u?.()??d)}const{Text:re,View:K,Pressable:W}=y.General,{TextStyleSheet:B}=R.findByProps("TextStyleSheet"),m=B["text-xs/semibold"].fontSize,T=e.stylesheet.createThemedStyleSheet({androidRipple:{color:c.semanticColors.ANDROID_RIPPLE,cornerRadius:8},container:{backgroundColor:c.semanticColors.BACKGROUND_TERTIARY,borderRadius:8,marginRight:8,marginTop:-12},text:{...B["text-xs/semibold"],textAlign:"right",paddingHorizontal:8,paddingVertical:8},extraMessagesCircle:{backgroundColor:c.semanticColors.REDESIGN_BUTTON_PRIMARY_BACKGROUND,borderRadius:2147483647,position:"absolute",left:0,top:0,transform:[{translateX:-m},{translateY:-m}],minWidth:m*2,height:m*2,justifyContent:"center",alignItems:"center",zIndex:2},normal:{color:c.semanticColors.TEXT_NORMAL},jinkies:{color:c.semanticColors.TEXT_DANGER}});function J(a){let{inputProps:n}=a;const[r,i]=e.React.useState(!1),t=e.React.useRef(null);n.onChangeText?C.after("onChangeText",n,function(S){let[_]=S;return t.current=_},!0):n.onChangeText=function(S){return t.current=S};const o=t.current?.length??0,s=U(),u=H()?Math.floor(o/s):0,d=o-u*s,g=T.text.fontSize*2+T.text.paddingVertical,p=o>0,f=p?W:K;return e.React.createElement(N,{duration:100,style:{flexDirection:"row-reverse",position:"absolute",right:0,top:-g,zIndex:1},fade:p?"in":"out",customOpacity:r&&p?.3:void 0},e.React.createElement(f,{android_ripple:T.androidRipple,disabled:!1,accessibilityRole:"button",accessibilityState:{disabled:!1,expanded:!1},accessibilityLabel:"Character counter",accessibilityHint:"Tap to toggle character counter translucency",style:T.container,onPress:p?function(){return i(!r)}:void 0},e.React.createElement(N,{fade:u>0&&p?"in":"out",duration:100,style:T.extraMessagesCircle},e.React.createElement(I,{variant:"text-xs/semibold",color:"TEXT_NORMAL",style:{paddingHorizontal:m/2}},u)),e.React.createElement(I,{variant:"text-xs/semibold",color:d<=s?"TEXT_NORMAL":"TEXT_DANGER",style:{paddingHorizontal:8,paddingVertical:8}},D(d),"/",D(s))))}const{ChatInput:q}=R.findByProps("ChatInput"),{MessagesWrapper:Q}=R.findByProps("MessagesWrapper");let E=[];function Z(){return E.push(C.after("render",q.prototype,function(a,n){const r=b.findInReactTree(n,function(t){return typeof t?.placeholder=="string"});if(!r?.onChangeText)return;const i=b.findInReactTree(n,function(t){return t?.type?.displayName==="View"&&Array.isArray(t?.props?.children)})?.props?.children;i&&i.unshift(React.createElement(J,{inputProps:r}))})),E.push(C.after("render",Q.prototype,function(a,n){const r=b.findInReactTree(n,function(i){return i?.type?.name==="JumpToPresentButton"});r&&E.push(C.after("type",r,function(i,t){t?.props?.style&&(t.props.style[1].bottom+=32+8)}))})),function(){E.forEach(function(a){return a()}),E=[]}}const{ScrollView:ee}=y.General,{FormSwitchRow:L,FormRow:O}=y.Forms;function te(){return l.commas??=!0,G.useProxy(l),React.createElement(ee,null,React.createElement(k,{title:"Settings",icon:v.getAssetIDByName("ic_cog_24px")},React.createElement(L,{label:"Add Thousand Seperators",subLabel:"Adds thousand seperators (1,234,567) to numbers",leading:React.createElement(O.Icon,{source:v.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return l.commas=!l.commas},value:l.commas}),React.createElement(L,{label:"Support SplitLargeMessages",leading:React.createElement(O.Icon,{source:v.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return l.supportSLM=!l.supportSLM},value:l.supportSLM})))}const l=V.storage;let w;var ne={onLoad:function(){return w=Z()},onUnload:function(){return w?.()},settings:te};return x.default=ne,x.vstorage=l,Object.defineProperty(x,"__esModule",{value:!0}),x})({},vendetta.plugin,vendetta.metro,vendetta.patcher,vendetta.utils,vendetta.metro.common,vendetta.ui.components,vendetta.plugins,vendetta.storage,vendetta.ui,vendetta.ui.assets);
